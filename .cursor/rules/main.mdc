---
alwaysApply: true
---

# Dev-Infra Template Repository - Cursor AI Rules

**Purpose:** Guide AI assistance to align with dev-infra template best practices and workflows  
**Identity:** ğŸ­ Template Factory ([ADR-001](../../../admin/decisions/dev-infra-identity-and-focus/adr-001-project-identity.md))  
**Last Updated:** 2025-12-15  
**Status:** âœ… Active

---

## ğŸ“‹ Quick Links

### Rules Files

- **[Workflow Rules](workflow.mdc)** - Git Flow, PR workflow, template development processes
- **[Template Rules](template.mdc)** - Template structure, generation, and validation standards

### Workflow Guides

- **[Worktree Feature Workflow](../../docs/WORKTREE-WORKFLOW.md)** - Feature development using worktrees and draft PRs

---

## ğŸ¯ Project Overview

This is a development infrastructure template repository that provides standardized project templates and best practices. Unlike application projects, dev-infra focuses on:

- **Template Generation** - Creating consistent project structures
- **Template Maintenance** - Evolving templates based on real project learnings
- **Best Practices** - Encoding proven patterns into templates
- **Workflow Automation** - Cursor commands for template development

### Key Principles

- **Hub-and-spoke documentation pattern** for organization
- **Template-first development** - Templates evolve based on real project needs
- **Git Flow** version control strategy
- **Progressive disclosure** for documentation (Overview â†’ Details â†’ Analysis)
- **Command-driven workflows** - Cursor commands automate complex processes

---

## ğŸ­ Project Identity: Template Factory

**Decision:** [ADR-001: Project Identity](../../../admin/decisions/dev-infra-identity-and-focus/adr-001-project-identity.md)

**Dev-infra's primary identity is "template factory."**

### What This Means

1. **Templates are products** - Treated as output, not reflections of dev-infra's internal process
2. **Internal tooling stays internal** - Release automation, validation scripts remain dev-infra-only
3. **Commands are guides** - All templates get all commands (no graduation gates)
4. **Quality over quantity** - Fewer, more stable template features

### Work Categories

When planning work, classify it:

| Category                | Where It Goes              | Template Impact         |
| ----------------------- | -------------------------- | ----------------------- |
| ğŸ¯ **Template Feature** | `admin/planning/features/` | Yes - goes in templates |
| ğŸ”§ **Internal Tooling** | `admin/planning/features/` | No - dev-infra only     |
| âš™ï¸ **CI/CD**            | `admin/planning/ci/`       | Depends on type         |

### Command Distribution

All templates receive all 26 workflow commands (including 2 deprecation stubs). Only dev-infra internal commands (release automation) stay internal.

**See:** [ADR-001: Commands as Guides](../../../admin/decisions/command-simplification/adr-001-commands-as-guides.md)

---

## ğŸ“ Documentation Standards

### Hub-and-Spoke Pattern

**ALWAYS follow this pattern when creating or updating documentation:**

1. **Hub Files (README.md)**

   - Serve as navigation entry points
   - Include "ğŸ“‹ Quick Links" section at the top
   - Provide overview of the directory/feature
   - Link to spoke documents
   - Include status indicators and last updated date

2. **Spoke Documents**

   - Focus on single topics or phases
   - Link back to hub files
   - Use descriptive filenames (e.g., `implementation-plan.md`, `01-foundation.md`)
   - Include status and date metadata

3. **Progressive Disclosure**
   - Start with high-level overview
   - Provide links to detailed documents
   - Use clear section hierarchy
   - Avoid overwhelming users with too much detail in hub files

### Status Indicators

Use these **consistently** across all documentation:

- ğŸ”´ **Not Started** - Planning stage only
- ğŸŸ¡ **Planned** - Approved but not yet begun
- ğŸŸ  **In Progress** - Active development
- âœ… **Active/Complete** - Operational or finished

### Date Format

Always use: `YYYY-MM-DD` format (e.g., 2025-12-07)

### File Naming Conventions

- Use **kebab-case** for file names: `implementation-plan.md`, `status-and-next-steps.md`
- Use **descriptive names**: `01-foundation-and-specs.md` not `01.md`
- README.md files are always **UPPERCASE**

---

## ğŸ—ï¸ Project Structure

### Directory Organization

**Respect this structure when creating files:**

```
dev-infra/
â”œâ”€â”€ templates/              # Project templates
â”‚   â”œâ”€â”€ standard-project/   # Standard application template (all commands)
â”‚   â””â”€â”€ learning-project/   # Learning/tutorial template (all commands)
â”œâ”€â”€ scripts/                # Automation scripts
â”‚   â”œâ”€â”€ new-project.sh      # Template generator
â”‚   â””â”€â”€ validate-templates.sh
â”œâ”€â”€ docs/                   # User documentation
â”œâ”€â”€ admin/                  # Dev-infra project management
â”‚   â”œâ”€â”€ planning/           # Template evolution planning
â”‚   â”‚   â”œâ”€â”€ features/       # Template feature development
â”‚   â”‚   â”œâ”€â”€ releases/       # Version management
â”‚   â”‚   â”œâ”€â”€ commands/       # Cursor commands integration
â”‚   â”‚   â””â”€â”€ opportunities/  # Learnings and improvements
â”‚   â”œâ”€â”€ research/           # Template design decisions
â”‚   â”œâ”€â”€ decisions/          # Architecture Decision Records (ADRs)
â”‚   â””â”€â”€ notes/              # Template insights and examples
â”œâ”€â”€ tests/                  # Template validation tests
â”œâ”€â”€ .cursor/                # Cursor IDE configuration
â”‚   â”œâ”€â”€ commands/           # Workflow automation commands
â”‚   â””â”€â”€ rules/              # AI assistant rules (this file)
â””â”€â”€ README.md               # Project hub
```

### File Location Rules

1. **Template Files** â†’ `templates/[type]/`
2. **Template Planning** â†’ `admin/planning/features/[feature-name]/`
3. **Release Management** â†’ `admin/planning/releases/vX.Y.Z/`
4. **Command Integration** â†’ `admin/planning/commands/`
5. **Research Documents** â†’ `admin/research/[category]/`
6. **Architecture Decisions (ADRs)** â†’ `admin/decisions/`
7. **User Documentation** â†’ `docs/`
8. **Cursor Commands** â†’ `.cursor/commands/`

---

## ğŸ”„ Workflow Processes

**Detailed workflow documentation:** See [workflow.mdc](workflow.mdc) for complete workflow processes including:

- Git Flow branching strategy and commit requirements
- Pull Request review workflow
- Template development lifecycle
- Release process
- Command integration workflow

---

## ğŸ¨ Template Development Standards

### When Modifying Templates

1. **Test Template Generation**

   - Always test with `./scripts/new-project.sh`
   - Verify generated project structure
   - Check all links and navigation
   - Validate template files

2. **Update Documentation**

   - Update template README files
   - Update user documentation in `docs/`
   - Update planning documents if feature-related
   - Maintain hub-and-spoke structure

3. **Maintain Consistency**
   - Follow existing template patterns
   - Keep structure consistent across template types
   - Preserve proven patterns from real projects
   - Document changes in planning documents

### Template Structure Requirements

**Standard Project Template:**

- Hub-and-spoke documentation structure
- Feature-based planning (`docs/maintainers/planning/features/`)
- Backend/frontend separation
- Centralized testing structure
- CI/CD workflows

**Learning Project Template:**

- Stage-based learning progression (`stage0-fundamentals/`, `stage1-topic/`, etc.)
- Practice apps directory
- Reference materials
- Exercise structure

---

## ğŸ¤– Cursor Commands Integration

### Available Commands

**Phase 1 (Core Workflow):**

- `/fix-plan` - Create fix batches from Sourcery reviews
- `/fix-implement` - Implement fix batches (planned)
- `/task` - Task implementation with TDD
- `/pr` - Centralized PR creation (planned)

**See:** `admin/planning/commands/` for command planning and integration status

### Command Usage Guidelines

- Commands are adapted from work-prod for template development
- Commands support generic paths (feature-specific or project-wide)
- Commands integrate with dev-infra's Git Flow workflow
- Commands follow hub-and-spoke documentation patterns

---

## ğŸ“ Code and Development Standards

### Template Code Quality

When modifying templates:

1. Follow language-specific best practices
2. Write clear, self-documenting code
3. Include inline comments for complex logic
4. Create validation tests for template structure
5. Update documentation when changing behavior

### Script Quality

**Template Generation Scripts:**

- Handle errors gracefully
- Provide clear user feedback
- Validate inputs
- Test edge cases
- Support both interactive and non-interactive modes

**Validation Scripts:**

- Check template structure
- Validate documentation links
- Verify file organization
- Report issues clearly

---

## ğŸ” AI Assistant Guidelines

### When Suggesting Changes

1. **Respect existing patterns** - Don't introduce new organizational patterns
2. **Update documentation** - When creating templates, update relevant hub files
3. **Maintain consistency** - Use established status indicators and date formats
4. **Follow templates** - Use feature plan and phase templates
5. **Link bidirectionally** - Hub â†’ Spoke and Spoke â†’ Hub

### When Creating New Templates

1. Create template directory with all required files
2. Update `templates/README.md` with new template link
3. Add entry to template roadmap
4. Use appropriate status indicators
5. Include all required directories and files
6. Test template generation

### When Making Template Changes

1. Check if documentation needs updating
2. Determine if PR is required (feat/fix) or can push directly (docs/chore)
3. Test template generation with changes
4. Update relevant README files
5. Consider if ADR is needed for significant decisions

### When Integrating Commands

1. Adapt commands from work-prod for dev-infra context
2. Make paths generic (support feature-specific and project-wide)
3. Test commands in dev-infra project
4. Integrate commands into templates
5. Document command usage

### Response Style

- Be clear and actionable
- Provide rationale for suggestions
- Reference project patterns
- Offer to implement rather than just suggest
- Ask clarifying questions when scope is unclear

---

## ğŸ“š Reference Templates

### Quick Links Section Template

```markdown
## ğŸ“‹ Quick Links

### [Category Name]

- **[Link 1](path/to/doc.md)** - Brief description (ğŸŸ  Status)
- **[Link 2](path/to/doc.md)** - Brief description (âœ… Status)
```

### Document Footer Template

```markdown
---

**Last Updated:** [YYYY-MM-DD]  
**Status:** [Status Indicator]  
**Next:** [Next action or milestone]
```

### Hub File Opening Template

```markdown
# [Title]

**Purpose:** [One-line description]  
**Status:** [Status Indicator]  
**Last Updated:** [YYYY-MM-DD]

---

## ğŸ“‹ Quick Links

[Links here]

---

## ğŸ¯ Overview

[Content here]
```

---

## ğŸ” Project-Specific Context

### Target Audience

**Primary Users:**

- Developers creating new projects
- Template maintainers evolving templates
- Projects using dev-infra templates

### Core Goals

1. **Template Quality** - Provide proven, tested templates
2. **Consistency** - Ensure all projects start with consistent structure
3. **Best Practices** - Encode proven patterns from real projects
4. **Workflow Automation** - Provide commands for common workflows
5. **Documentation** - Maintain comprehensive guides and examples

### Success Metrics

- Template generation success rate
- Template usage across projects
- Command adoption and effectiveness
- Documentation completeness
- Template evolution based on learnings

---

## ğŸš§ Current Project State

**Version:** v0.9.0 (released 2026-02-13) â€” v0.10.0 features on develop  
**Identity:** ğŸ­ Template Factory (ADR-001)  
**Stage:** Active Development  
**Updated:** 2026-02-28  
**Priority:** v0.10.0 release prep

### âœ… Completed

**Template System:**

- âœ… Standard project template (all 26 commands)
- âœ… Learning project template (all 26 commands)
- âœ… Template generator script (2 template types)
- âœ… Template validation script
- âœ… Hub-and-spoke documentation pattern

**CI/CD:**

- âœ… Multi-environment testing workflow
- âœ… Release distribution workflow
- âœ… Docker test image builds
- âœ… Template validation test suite (110+ tests)
- âœ… Known issues tracking system
- âœ… Template sync validation in CI - NEW

**Release Readiness (v0.5.0):**

- âœ… `check-release-readiness.sh` - Assessment and validation
- âœ… `create-release-branch.sh` - Release branch creation helper
- âœ… `analyze-releases.sh` - Historical release analysis
- âœ… Standardized release criteria
- âœ… Assessment template with YAML frontmatter

**Release Automation v2 (v0.5.0):**

- âœ… Phase 1: Tag Creation Automation
- âœ… Phase 2: Version Reference Automation

**Documentation:**

- âœ… Template usage guides
- âœ… Project types guide
- âœ… Best practices guide
- âœ… Customization guide
- âœ… Reflection and exploration workflows

**Planning:**

- âœ… Feature planning structure
- âœ… Release planning structure
- âœ… Opportunities tracking (external/internal)
- âœ… Command integration planning

**Commands (Core - Complete):**

- âœ… `/review` - Review agentic changes before committing
- âœ… `/commit` - Commit from review context
- âœ… `/handoff` - Session continuity and work handoff
- âœ… `/fix-plan` - Create fix batches from reviews
- âœ… `/fix-implement` - Implement fix batches
- âœ… `/task` - Task implementation with TDD (replaces `/task-phase`)
- âœ… `/pr` - Centralized PR creation
- âœ… `/pr-validation` - PR validation workflow
- âœ… `/post-pr` - Post-merge documentation
- âœ… `/plan-review` - Review implementation plans before work (replaces `/pre-phase-review`)
- âœ… `/address-review` - Address gaps from pre-phase review
- âœ… `/reflect` - Project reflection and suggestions
- âœ… `/int-opp` - Internal opportunity capture
- âœ… `/explore` - Exploration workflow
- âœ… `/spike` - Time-boxed technical validation
- âœ… `/research` - Research workflow
- âœ… `/decision` - ADR creation workflow
- âœ… `/transition-plan` - Planning from artifacts/ADRs
- âœ… `/task-release` - Release task implementation (with readiness check)

### âœ… Recently Completed

**Workflow Simplification (v0.10.0 â€” PR #68, 2026-02-28):**

- âœ… Uniform planning structure: `implementation-plan.md` + `tasks/` for every feature
- âœ… New `/task` command (replaces `/task-phase`) with hybrid `next`/`N`/bare interface
- âœ… New `/plan-review` command (replaces `/pre-phase-review`)
- âœ… `/transition-plan` rewritten for uniform output (two-mode preserved)
- âœ… Dual-path detection in `/pr`, `/post-pr`, `/status` for migration
- âœ… Migration guide (`docs/MIGRATION-v0.10.md`), doc-gen templates, planning spec
- âœ… 26 commands synced to both templates (including 2 deprecation stubs)

**Command Simplification (v0.8.0):**

- âœ… All templates now have all 26 commands
- âœ… Removed experimental-project template (merged into standard)
- âœ… Removed graduation process (ADR-004 superseded)
- âœ… ADR-001: Commands as Guides created

**Fix Management:**

- âœ… 8 cross-PR fix batches complete (28 issues fixed)
- âœ… `/fix-review` â†’ `/fix-plan` â†’ `/fix-implement` workflow validated

### âœ… Recently Released

**v0.9.0 - New Commands and Template Enhancements (2026-02-13):**

- âœ… 4 new commands: `/spike`, `/review`, `/commit`, `/handoff` (19 â†’ 23 total)
- âœ… `/explore` two-mode pattern (setup + conduct with human review checkpoint)
- âœ… Input sources for `/explore` (raw text, start.txt, reflections)
- âœ… Worktree integration for `/explore` conduct mode
- âœ… Template-doc-infrastructure: 17 doc-gen templates + specifications
- âœ… Review-then-commit integration in implementation commands
- âœ… Sourcery configuration for `.cursor/` and `docs/` ignore
- âœ… Spike determination tables in explore workflow

**v0.8.0 - Worktree Feature Workflow (2026-01-10):**

- âœ… Worktree feature workflow with draft PRs
- âœ… `.sourcery.yaml` configuration for doc-aware reviews
- âœ… `/pr --draft`, `--ready`, `--review` flags
- âœ… Self-contained feature branches (all docs on feature branch)

### ğŸŸ  In Progress

- (none currently)

### ğŸŸ¡ Planned

**Future Considerations:**

- ğŸŸ¡ v0.10.0 release prep (command reference consistency sweep, stale count cleanup)
- ğŸŸ¡ Command branch workflow (`cmd/*` pattern)

---

## ğŸ“ Maintenance

### Updating These Rules

**Update this file when:**

- New patterns are established
- Template structure changes
- Workflow processes change
- New commands are integrated
- Best practices evolve

**Update Process:**

1. Make changes to this file (or appropriate split file)
2. Commit with message: `docs(cursor-rules): [description]`
3. Push to develop branch (docs/\* can push directly)
4. No PR required for cursor rules updates

**Split Files:**

- **Workflow changes:** Update [workflow.mdc](workflow.mdc)
- **Template changes:** Update [template.mdc](template.mdc)

---

**Last Updated:** 2026-02-28  
**Status:** âœ… Active  
**Next:** v0.10.0 release prep
